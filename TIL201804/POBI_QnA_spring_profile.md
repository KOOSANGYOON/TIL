개발할 때, local 환경이 있고,

n명의 개발자들이 개발을 한다고 할 때,

여러 사람들의 local에서 개발한 코드들을 통합해서 테스트 할 수 있는 개발 서버 환경이 필요하다.

이후에 실제 서비스를 제공하는 Real 환경으로 올려준다.

개발 서버환경에서는 여러 local 에서 개발된 코드들을 통합하여 테스트하기 위해서 개발 서버환경에
DB를 구축해두고, 각 local에서 이 DB서버를 참조하는 방식으로 테스트 할 수 있다.

이렇게 DB를 공유하고 있으면, 개발자1이 칼럼을 변경했다고 가정했을때, 개발자2는 본인은 아무것도 만지지 않았지만,
테이블 스키마가 맞지 않는다는 오류가 발생하여 프로그램이 구현되지 않는다는 문제가 있다.

이렇듯 DB를 공유한다면 매 테스트시마다 계속해서 변경에 대한 정보를 실시간으로 공유해야 하기 때문에,
스키마를 한곳에서 관리하는 장점이 있지만, 개발 생산성을 떨어트리는 하나의 요소가 된다는 것이다.

그렇기 때문에 각각의 local환경에서 각 개인의 DB를 가지고 테스트를 진행하고, 개발 환경서버도
DB를 가지고 있는 식의 개발 환경이 가장 바람직하다. 다른 사람의 개발에 전혀 영향을 끼치지
않는식의 개발이 가장 바람직하다고 할 수 있는 것이다.

---

이러한 개발 방식으로 진행이 될 때,

local DB 서버에 관리자 id / password 가 있을것이고,
개발 환경에서 관리하는 DB 서버에도 관리자 id / password 가 있을것이며,
실제 Real 환경에서 관리하는 DB 서버에도 관리자 id / password 가 있게 된다.
이를 어떻게 관리하는것이 좋을까?

같은 소스코드를 가지고 이렇게 여러 id / password 를 통해 모든 서버에서 배포를 진행한다면,
매 배포시마다 그 서버가 관리하는 (DB서버) 관리자 id / password 를 새로 적어서 코드를
실행하고, 배포해야 한다. 가장 큰 문제점은, 인간은 실수할 수 있다는 것이다. 한 번 실수
데이터베이스에 엄청난 장애를 몰고 올 것이다.

이 때문에 java spring 에서 제공하는 profile 기능을 이용하여,
각 서버별(다른 환경마다의)로 application.properties 파일을 만들어서,
공통되는 부분만 묶고, 다른 부분을 따로 빼서 파일을 구분해준다.

이후에 shall script 를 실행할 때, profile 기능을 이용해서 조건을 넣어 실행시키고,
이를 통해 각각 다른 환경에서의 알맞은 서비스 실행이 가능해진다.
이처럼 shall script 를 실행하는 것 만으로 모든 서버의 배포가 자동화가 가능해야 한다.
(실수를 예방할 수 있다.)

---
