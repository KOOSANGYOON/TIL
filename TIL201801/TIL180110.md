# (2018.01.09)

## TIL

1. spark.java 시작

---
### 1. spark.java 시작

bowling 과제를 끝마치고 level 3 과정을 시작했다. level 3 과정은 console 창이 아닌,
WEB UI 를 이용하여 프로그래밍 하는 과정이다. 이를 위해 먼저 spark 웹 프레임 워크의 사용법에 대해
학습했다.

---
#### 1-1) spark. java ?

JAVA 진영에서 사용할 수 있는 상당히 가벼운 웹 프레임 워크 중 하나이다.
초기 학습비용이 낮고, 웹 애플리케이션을 경험해 보는데 굉장히 유용한 도구이다.
웹에 대한 학습을 시작하는 도구로 사용하기에 아주 적합하다.

---
#### 1-2) gradle project 생성

spark 웹 프레임 워크를 사용하기 위해 처음으로 해야 할 것은 gradle project 를 생성하는 것이다.
이를 위해 eclipse 에서 STS (spring tool suite) plugin 을 설치하여 실행할 수도 있고,
STS를 직접 설치해서 사용할 수도 있다. 나는 후자를 택해 진행했다.

STS 를 실행한 후, eclipse 를 실행할 때 처럼 `command + n` 단축키를 이용해 프로젝트를 생성할 수 있다. `type` 을 `gradle (buildship 2.x)` 로 생성하면 끝이 난다.

---
#### 1-3) 시작 세팅

gradle build 도구의 기본 파일은 `build.gradle` 라는 파일이다. 이 파일을 켠 뒤에,
필요없는 코드들을 삭제하고, (현재는 spark.java 를 이용하므로, spring boot 관련 부분을 삭제한다.) main 부분과 test 부분에 있는 기본 spring boot 용 default 파일들을 삭제한다.

여기까지 완료했다면, `project and external dependencies` 폴더 안에 있는 파일들을 refresh 해 줄 필요가 있다.

 1. `build.gradle 파일에 우클릭` 해준 뒤,

 2. `gradle` 클릭

 3. `refresh gradle project` 클릭

 이렇게 refresh가 가능하다.

여기까지 완료 되었다면, gradle 의 빌드 도구들을 dependencies에 넣어주어야 한다.
spark java 홈페이지에 가보면 추가할 내용을 알 수 있다. 현재는,
> Gradle : compile "com.sparkjava:spark-core:2.7.1" // add to build.gradle (for Java users)

로 되어있다. 이 내용을 dependencies 에 적어준다. 완료 후에 다시 refresh를 해주면,
기본 세팅이 완료된다.

---
#### 1-4) main class 생성

main class 생성은 기존 eclipse 사용시와 동일하다.

클래스를 생성하고, 코딩을 한 뒤에 웹 서버를 띄워주기 위해서는

 1. 우클릭 후 `Run as` 클릭

 2. `Java application` 클릭

으로 서버를 띄워줄 수 있다. 서버의 주소는,

> localhost:4567

로 시작한다.

웹의 내용을 수정한 뒤, 서버를 재시작 할 때에는 다시 클릭하는 과정들을 다 거치지 않고,
상단의 Relaunch 버튼을 클릭하면 바로 재시작 된다.

---
#### 1-5) 동적인 값 전달방법

- get() 내에서의 사용법

 (.params() 사용법)
 - get("/hello", (req, res) -> { . . . })
 > localhost:4567/hello 로 갔을 때의 로직을 구현해준다. (정적인 주소)

 - get("/hello/:name", (req, res) -> { . . . req.params(":name") . . . })
 > localhost:4567/hello/koo 와 같이 뒤에 이름을 동적 값으로 넘겨줄 수 있다.

 이처럼 동적인 변수를 넘겨줄 때에는 url에서 변수이름 앞에 `: (콜론)` 을 붙여주어야 하고,

 로직 구현부에서는 `req.params(":변수이름");` 로 받아주어야 반영이 가능하다.

 (.queryParams() 사용법)
 - 로직 구현부에서 `return "Hello " + req.queryParams("name");` 로 구현되었을 때,

 주소창에 `localhost:4567/hello?name=koo` 와 같이 입력하여 사용 가능하다.

 2개 이상의 값을 출력해줄 때에는, 로직 구현부에 `return "Hello " + req.queryParams("name") + " 나이는 " + req.queryParams("age");` 와 같이 구현하고,

 주소창에 `localhost:4567/hello?name=koo&age=20` 과 같이 `&(앤드)` 연산자를 주소창에 넣어서 사용이 가능하다.
